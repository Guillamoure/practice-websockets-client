{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jack\\\\Documents\\\\GitHub\\\\practice-websockets-client\\\\src\\\\index.js\";\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport './index.css';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nconst localhost = 'localhost:1597';\nconst client = new W3CWebSocket(`ws://${localhost}`);\n\nconst App = () => {\n  const [username, setUsername] = React.useState('');\n  const [isLoggedIn, setLoggedIn] = React.useState(false);\n  const [messages, updateMessages] = React.useState([]);\n  React.useEffect(() => {\n    client.onopen = () => {\n      console.log(\"WebSocket Client Connected\");\n    };\n\n    client.onmessage = message => {\n      const dataFromServer = JSON.parse(message.data); // console.log('got reply', dataFromServer)\n\n      if (dataFromServer.type === \"message\") {\n        updateMessages([...messages, {\n          user: dataFromServer.user,\n          msg: dataFromServer.msg\n        }]);\n      }\n    };\n  }, [messages]);\n\n  const onButtonClicked = e => {\n    e.preventDefault();\n    const value = e.target.message.value;\n    client.send(JSON.stringify({\n      type: \"message\",\n      msg: value,\n      user: username\n    }));\n  };\n\n  const login = e => {\n    e.preventDefault();\n    setLoggedIn(true);\n  };\n\n  const messageClasses = user => {\n    let cl = \"message\";\n    cl += user === username ? ' self' : ' other';\n    return cl;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, isLoggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onButtonClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"Send Message!\"), /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"messages-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, messages.map(msg => /*#__PURE__*/React.createElement(\"li\", {\n    key: uuidv4(),\n    className: messageClasses(msg.user),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 34\n    }\n  }, msg.msg, \" - \", msg.user))), /*#__PURE__*/React.createElement(\"form\", {\n    if: \"message-input\",\n    onSubmit: onButtonClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"message\",\n    placeholder: \"message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Send\"))) : /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"Enter name\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"username\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Login\")));\n};\n\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 17\n  }\n}), document.getElementById(\"root\"));","map":{"version":3,"sources":["C:/Users/Jack/Documents/GitHub/practice-websockets-client/src/index.js"],"names":["ReactDOM","React","v4","uuidv4","w3cwebsocket","W3CWebSocket","localhost","client","App","username","setUsername","useState","isLoggedIn","setLoggedIn","messages","updateMessages","useEffect","onopen","console","log","onmessage","message","dataFromServer","JSON","parse","data","type","user","msg","onButtonClicked","e","preventDefault","value","target","send","stringify","login","messageClasses","cl","map","render","document","getElementById"],"mappings":"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","sourcesContent":["import ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport './index.css'\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket'\r\nconst localhost = 'localhost:1597'\r\n\r\nconst client = new W3CWebSocket(`ws://${localhost}`)\r\n\r\nconst App = () => {\r\n\r\n  const [username, setUsername] = React.useState('')\r\n  const [isLoggedIn, setLoggedIn] = React.useState(false)\r\n  const [messages, updateMessages] = React.useState([])\r\n\r\n  React.useEffect(() => {\r\n    client.onopen = () => {\r\n      console.log(\"WebSocket Client Connected\")\r\n    }\r\n    client.onmessage = (message) => {\r\n      const dataFromServer = JSON.parse(message.data)\r\n      // console.log('got reply', dataFromServer)\r\n      if(dataFromServer.type === \"message\"){\r\n        updateMessages([...messages, {\r\n          user: dataFromServer.user,\r\n          msg: dataFromServer.msg\r\n        }])\r\n      }\r\n    }\r\n  }, [messages])\r\n\r\n  const onButtonClicked = (e) => {\r\n    e.preventDefault()\r\n    const value = e.target.message.value\r\n    client.send(JSON.stringify({\r\n      type: \"message\",\r\n      msg: value,\r\n      user: username\r\n    }))\r\n  }\r\n\r\n  const login = (e) => {\r\n    e.preventDefault()\r\n    setLoggedIn(true)\r\n  }\r\n\r\n  const messageClasses = (user) => {\r\n    let cl = \"message\"\r\n    cl += user === username ? ' self' : ' other'\r\n    return cl\r\n  }\r\n\r\n  return (\r\n    <div id=\"main\">\r\n      {isLoggedIn ?\r\n        <div>\r\n          <button onClick={onButtonClicked}>Send Message!</button>\r\n          <ul id=\"messages-container\">\r\n            {messages.map(msg => <li key={uuidv4()} className={messageClasses(msg.user)}>{msg.msg} - {msg.user}</li>)}\r\n          </ul>\r\n          <form if=\"message-input\" onSubmit={onButtonClicked}>\r\n            <input name=\"message\" placeholder=\"message\"/>\r\n            <button>Send</button>\r\n          </form>\r\n        </div>\r\n        :\r\n        <form onSubmit={login}>\r\n          <label>Enter name</label>\r\n          <input name=\"username\" value={username} onChange={(e) => setUsername(e.target.value)}/>\r\n          <button>Login</button>\r\n        </form>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n"]},"metadata":{},"sourceType":"module"}